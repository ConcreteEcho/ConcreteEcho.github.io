---
title: Warpd и русская раскладка на linux
description: От перемены мест слагаемых значение меняется
slug: warpd-layout-fix
date: 2024-03-17 18:00:00+0000
math: false

categories:
    - til

tags:
    - linux

image: cover.png

draft: false
---

# warpd

## Что такое warpd?

Из описания репозитория на github: интерфейс управления мышью с помощи клавиатуры. Более подробно с примерами использования можно ознакомиться тут: [репозиторий на GitHub](https://github.com/rvaiya/warpd)

На 17.03.2024 репозиторий на гитхабе имеет 2700 звездочек, а последний коммит в мастер был 10 месяцев назад. Есть несколько issues открытых с июня 2023, большинство из которых относится к работе warpd на Windows. То есть проект взрослый, и как говорится feature-complete.

## Проблема с раскладками

Если на компьютере используется несколько раскладок, то warpd берет из них ту, которая выводится в `localectl`. Это приводит к тому, что если в системе установлена первой раскладка на русском (как это было в моем случае), то `warpd --hint` не работает совсем. А если пользователь использует в том числе qwerty и Dvorak, как в [этом issue](https://github.com/rvaiya/warpd/issues/189), то при нажатии на одну кнопку warpd в режиме *hint* воспринимает ее как другую. Этот issue помог мне понять, почему у меня warpd не работал совсем.

## Решение

Решение оказалось простым - исправить скрипт, который устанавливает раскладки при запуске i3wm (оконный менеджер, которым я пользуюсь).

Скрипт до: 

```shell
setxkbmap -layout ru,us -variant ,dvorak
```

И скрипт после:

```shell
setxkbmap -layout us,ru -variant dvorak,
```

После этого изменения *hint* режим warpd работает как и должен.
